<!DOCTYPE html>
<html>
	<head>
		<title>jQuery.ajaxPostForm</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="polosson">

		<link rel="stylesheet" href="vendor/bootstrap.min.css" />
		<script src="vendor/jquery-2.0.1.min.js"></script>
		<script src="vendor/bootstrap.min.js"></script>
		<script src="js/jquery.ajaxPostForm.js"></script>
		<script>
		$(function(){
			$.messageBox({'message':"Welcome !!"});
			$('#testform, #testform2').ajaxPostForm({
				onSubmit: function(R) {
					if (R.params.data.radios == "rad1") {
						$.messageBox({
							"cssClass":'alert-danger',
							"message": "I do not allow you to post here because you checked the radio '"+R.params.data.radios+"'!!<br />Mouaahahahaaaa !!!"
						});
						return false;
					}
					return true;
				},
				onSuccess: function(R){
					$.messageBox({
						"cssClass":'alert-info',
						"message":R.message+'<br /><code>'+JSON.stringify(R.data)+'</code>'
					});
				}
			});
		});
		</script>
	</head>
	<body style="overflow-y: scroll;">
		<div class="container-fluid">
			<div class="col-lg-6">
				<h3>Jquery plugin to send form via ajax POST - <small>jquery.ajaxPostForm.js</small> -</h3>
				<div id="testform" class="well" style="margin-top: 20px;">
					<div class="row">
						<div class="col-lg-2"></div>
						<div class="col-lg-10">
							<h4>#testform</h4>
						</div>
						<div class="col-lg-2 text-right">
							INPUT
						</div>
						<div class="col-lg-10">
							<input type="text" class="form-control" autocomplete="off" name="input" />
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							PASSWORD
						</div>
						<div class="col-lg-10">
							<input type="password" class="form-control" autocomplete="off" name="passwd" />
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							TEXT
						</div>
						<div class="col-lg-10">
							<textarea class="form-control" autocomplete="off" name="textarea"></textarea>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							SELECT
						</div>
						<div class="col-lg-10">
							<select class="form-control" name="select">
								<option value=""></option>
								<option value="opt2">Option 2</option>
								<option value="opt3">Option 3</option>
								<option value="opt4">Option 4</option>
								<option value="opt5">Option 5</option>
							</select>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							MULTI SELECT
						</div>
						<div class="col-lg-10">
							<select class="form-control" style="height: 120px;" name="multiselect" multiple>
								<option value="opt1">Option 1</option>
								<option value="opt2">Option 2</option>
								<option value="opt3">Option 3</option>
								<option value="opt4">Option 4</option>
								<option value="opt5">Option 5</option>
							</select>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							CHECKBOXES
						</div>
						<div class="col-lg-10">
							<div class="btn-group" data-toggle="buttons" data-rules='{"r":1}'>
								<label class="btn btn-sm btn-default">
									<input type="checkbox" name="checkboxes" autocomplete="off" value="chk1" /> Checkbox 1
								</label>
								<label class="btn btn-sm btn-default">
									<input type="checkbox" name="checkboxes" autocomplete="off" value="chk2" /> Checkbox 2
								</label>
								<label class="btn btn-sm btn-default">
									<input type="checkbox" name="checkboxes" autocomplete="off" value="chk3" /> Checkbox 3
								</label>
								<label class="btn btn-sm btn-default">
									<input type="checkbox" name="checkboxes" autocomplete="off" value="chk4" /> Checkbox 4
								</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							RADIOS
						</div>
						<div class="col-lg-10">
							<div class="btn-group" data-toggle="buttons">
								<label class="btn btn-sm btn-default active">
									<input type="radio" name="radios" autocomplete="off" checked="checked" value="rad1" /> Radio 1
								</label>
								<label class="btn btn-sm btn-default">
									<input type="radio" name="radios" autocomplete="off" value="rad2" /> Radio 2
								</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
						</div>
						<div class="col-lg-10">
							<button class="btn btn-success submitBtn" data-destination="actions/A_test.php" data-action="testOne">SEND</button>
						</div>
					</div>
				</div>


				<div id="testform2" class="well" style="margin-top: 50px;">
					<div class="row">
						<div class="col-lg-2"></div>
						<div class="col-lg-10">
							<h4>#testform2</h4>
						</div>
						<div class="col-lg-2 text-right">
							EMAIL
						</div>
						<div class="col-lg-10">
							<input type="text" class="form-control" name="email" autocomplete="off" data-rules='{"r":1,"f":"email"}' value="polo@polosson.com" />
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
							PASSWORD
						</div>
						<div class="col-lg-10">
							<input type="password" class="form-control" name="password" autocomplete="off" data-rules='{"r":1,"m":6,"M":20,"f":"password"}' value='megapsswd*' />
						</div>
					</div>
					<div class="row">
						<div class="col-lg-2 text-right">
						</div>
						<div class="col-lg-10">
							<button class="btn btn-success submitBtn"
									data-destination="actions/A_test.php"
									data-action="testTwo"
									data-extra-params='{"extra1":"wouzah", "extra2":"wazaa"}'>
								SEND
							</button>
						</div>
					</div>
				</div>
			</div>

			<div class="col-lg-6">
				<div class="row">
					<h3>Message box</h3>
					<div class="alert hide" style="margin-top: 20px;" id="messageBox">
						<div class="message"></div>
					</div>
				</div>
				<div class="row">
					<h3 data-toggle="collapse" data-target="#documentation" aria-expanded="false" aria-controls="collapseExample" title="Show documentation" style="cursor:pointer;">
						Documentation &dArr;
					</h3>
					<div class="collapse well" id="documentation">
						<div style="margin-top: 20px;">
							<h4>Basic use</h4>
							<code>$('#testform, #testform2').ajaxPostForm();</code>
						</div>
						<div style="margin-top: 20px;">
							<h4>Submit button inline parameters (data- attributes on submit button)</h4>
							<pre>data-destination	-> string : The path to the server for the POST request *REQUIRED*
data-action		-> string : The name of the action to send to the server *REQUIRED*
data-extra-params	-> object : Some additionnal parameters to send to the server (optionnal)</pre>
						Example:<br />
							<code>
								&lt;button class="btn btn-success submitBtn"
								<br />&nbsp;&nbsp;&nbsp;&nbsp; data-destination="actions/A_test.php"
								<br />&nbsp;&nbsp;&nbsp;&nbsp; data-action="testAction"
								<br />&nbsp;&nbsp;&nbsp;&nbsp; data-extra-params='{"happy":"yes", "tired":"nope"}'&gt;
								<br />&nbsp;&nbsp;&nbsp;&nbsp; SEND
								<br />&lt;/button&gt;
							</code>
						</div>
						<div style="margin-top: 20px;">
							<h4>Options</h4>
							<pre>$('#testform, #testform2').ajaxPostForm({
	'submit': '.submitBtn',		// The CSS selector to identify the form's submit button
	'minInputLength': 4,		// Global minimum length for the input or textarea fields
	'maxInputLength': 20,		// Global maximum length for the input or textarea fields (0 = no limit)
	'extraParams': {		// Global additionnal parameters to send (can be null)
		"happy":"yes",
		"tired":"nope"
	},
	onSubmit: function(R){		// Invoked when submit button clicked
		// R is an object with :
		//		R.params	-> the request (object) that will be posted,
		//		R.message	-> The string "Sending request..."
		console.log(R.data, R.message);
		// Must return TRUE in order to continue.
		return true;	// If returns FALSE, the request won't be sent.
	},
	onSuccess: function(R){		// Invoked when post request succeed
		// R is an object with :
		//		R.error		-> The string "OK",
		//		R.message	-> The success message irself (server response)
		console.log(R.error, R.message);
	},
	onFail: function(R){		// Invoked when post request failed
		// R is an object with :
		//		R.error		-> The string "error",
		//		R.message	-> The error message itself
		console.log(R.error, R.message);
	}
});</pre>
						</div>
						<div style="margin-top: 20px;">
							<h4>Fields inline options (data- attributes on form fields)</h4>
							<pre>data-rules: {"r":(bool),"m":(int),"M":(int),"f":(str)}
	r -> boolean (1 || 0) : Makes the field mandatory if 1
	m -> integer : Minimum length of input or textarear field
	M -> integer : Maximum length of input or textarear field
	f -> string  : Function name to validate the field ("email", "password", or "phone")</pre>
						</div>
						<div style="margin-top: 20px; margin-bottom: 150px;">
							<h4>** Message box utility</h4>
							<code>$.messageBox({"cssClass":'alert-info',"message":"your message"});</code>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
